---
title: Tree-1
date: 2020-06-04 21:48:43
tags:
disqusId: aitudou-blog
---

## Tree 树

树：n≥0个节点构成的有限集合。
当n=0,称为空树
当n>0,树中有一个称为“根”的特殊节点，其余节点可分为m个互不相交的有限集合，其中每个集合本身又是一颗树，称为原来树的子树。

<!-- More -->

![](https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwOTExMTEwNDU0MjIz)

![](https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwOTExMTEwNjM3Njc4)

## 二叉树 Binary Tree

![](https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwOTExMTEwNzU3NDcy)


- Full Binary Tree

所有的节点都是满的

- Complete Binary Tree

除了最下面的一层，剩下的都是满的，而且最下层的节点都在左边

![](https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwOTExMTEwODQ0NzM1)

--> __二叉排序树（Binary Sort Tree），又称二叉查找树（Binary Search Tree）__


## 红黑树

红黑树的特性:
- 每个节点或者是黑色，或者是红色。
- 根节点是黑色。
- 每个叶子节点（NIL）是黑色。 [注意：这里叶子节点，是指为空(NIL或NULL)的叶子节点！]
- 如果一个节点是红色的，则它的子节点必须是黑色的。
- 从一个节点到该节点的子孙节点的所有路径上包含相同数目的黑节点。

举例：
![](https://images0.cnblogs.com/i/497634/201403/251730074203156.jpg)

### 红黑树操作：
1. 左旋

![](https://images0.cnblogs.com/i/497634/201403/251733282013849.jpg)

2. 右旋

![](https://images0.cnblogs.com/i/497634/201403/251735527958942.jpg)

3. 插入

将一个节点插入到红黑树中，需要执行哪些步骤呢？

首先，将红黑树当作一颗二叉查找树，将节点插入；

然后，将节点着色为红色；

最后，通过旋转和重新着色等方法来修正该树，使之重新成为一颗红黑树。详细描述如下：

- 第一步: 将红黑树当作一颗二叉查找树，将节点插入。
       红黑树本身就是一颗二叉查找树，将节点插入后，该树仍然是一颗二叉查找树。也就意味着，树的键值仍然是有序的。此外，无论是左旋还是右旋，若旋转之前这棵树是二叉查找树，旋转之后它一定还是二叉查找树。这也就意味着，任何的旋转和重新着色操作，都不会改变它仍然是一颗二叉查找树的事实。
       好吧？那接下来，我们就来想方设法的旋转以及重新着色，使这颗树重新成为红黑树！

- 第二步：将插入的节点着色为"红色"。
       为什么着色成红色，而不是黑色呢？为什么呢？在回答之前，我们需要重新温习一下红黑树的特性：

1. 每个节点或者是黑色，或者是红色。
2. 根节点是黑色。
3. 每个叶子节点是黑色。 [注意：这里叶子节点，是指为空的叶子节点！]
4. 如果一个节点是红色的，则它的子节点必须是黑色的。
5. 从一个节点到该节点的子孙节点的所有路径上包含相同数目的黑节点。
       将插入的节点着色为红色，不会违背"特性(5)"！少违背一条特性，就意味着我们需要处理的情况越少。接下来，就要努力的让这棵树满足其它性质即可；满足了的话，它就又是一颗红黑树了。o(∩∩)o...哈哈

- 第三步: 通过一系列的旋转或着色等操作，使之重新成为一颗红黑树。
       第二步中，将插入节点着色为"红色"之后，不会违背"特性(5)"。那它到底会违背哪些特性呢？
       对于"特性(1)"，显然不会违背了。因为我们已经将它涂成红色了。
       对于"特性(2)"，显然也不会违背。在第一步中，我们是将红黑树当作二叉查找树，然后执行的插入操作。而根据二叉查找数的特点，插入操作不会改变根节点。所以，根节点仍然是黑色。
       对于"特性(3)"，显然不会违背了。这里的叶子节点是指的空叶子节点，插入非空节点并不会对它们造成影响。
       对于"特性(4)"，是有可能违背的！
       那接下来，想办法使之"满足特性(4)"，就可以将树重新构造成红黑树了。

根据被插入节点的父节点的情况，可以将"当节点z被着色为红色节点，并插入二叉树"划分为三种情况来处理。
1. 情况说明：被插入的节点是根节点。 -- 处理方法：直接把此节点涂为黑色。
2. 情况说明：被插入的节点的父节点是黑色。-- 处理方法：什么也不需要做。节点被插入后，仍然是红黑树。
3. 情况说明：被插入的节点的父节点是红色。 -- 处理方法：那么，该情况与红黑树的“特性(5)”相冲突。这种情况下，被插入节点是一定存在非空祖父节点的；进一步的讲，被插入节点也一定存在叔叔节点(即使叔叔节点为空，我们也视之为存在，空节点本身就是黑色节点)。理解这点之后，我们依据"叔叔节点的情况"，将这种情况进一步划分为3种情况(Case)。

|        |  现象说明 | 处理策略  |
| ----   |  ----    |  ----     |
| Case 1 | 当前节点的父节点是红色，且当前节点的祖父节点的另一个子节点（叔叔节点）也是红色。	| (01) 将“父节点”设为黑色。(02) 将“叔叔节点”设为黑色。(03) 将“祖父节点”设为“红色”。(04) 将“祖父节点”设为“当前节点”(红色节点)；即，之后继续对“当前节点”进行操作   |
| Case 2 | 叔叔是黑色，且当前节点是右孩子    | (01) 将“父节点”作为“新的当前节点”。(02) 以“新的当前节点”为支点进行左旋。   | 
| Case 3 | 当前节点的父节点是红色，叔叔节点是黑色，且当前节点是其父节点的左孩子	| (01) 将“父节点”设为“黑色”。(02) 将“祖父节点”设为“红色”。(03) 以“祖父节点”为支点进行右旋。|


## Case 1:

![](https://images0.cnblogs.com/i/497634/201403/251759273578917.jpg)

__important__ ： 祖父节点这时候不一定符合红黑树要求： 

1. 若此时，祖父节点是根节点，直接将祖父节点设为“黑色”，那就完全解决这个问题了
2. 若祖父节点不是根节点，那我们需要将“祖父节点”设为“新的当前节点”，接着对“新的当前节点”进行分析。 

## Case 2:

![](https://images0.cnblogs.com/i/497634/201403/251801031546918.jpg)

## Case 3:

![](https://images0.cnblogs.com/i/497634/201404/170945094945387.jpg)

解决问题


4. 删除

https://www.jianshu.com/p/e136ec79235c

二叉树删除结点找替代结点有3种情情景：

情景1：若删除结点无子结点，直接删除
情景2：若删除结点只有一个子结点，用子结点替换删除结点
情景3：若删除结点有两个子结点，用后继结点（大于删除结点的最小结点）替换删除结点


下面对删除函数进行分析。在分析之前，我们再次温习一下红黑树的几个特性：
1. 每个节点或者是黑色，或者是红色。
2. 根节点是黑色。
3. 每个叶子节点是黑色。 [注意：这里叶子节点，是指为空的叶子节点！]
4. 如果一个节点是红色的，则它的子节点必须是黑色的。
5. 从一个节点到该节点的子孙节点的所有路径上包含相同数目的黑节点。

前面我们将"删除红黑树中的节点"大致分为两步，在第一步中"将红黑树当作一颗二叉查找树，将节点删除"后，可能违反"特性(2)、(4)、(5)"三个特性。第二步需要解决上面的三个问题，进而保持红黑树的全部特性。

问题： 替换结点是黑结点


|        |  现象说明 | 处理策略  |
| ----   |  ----    |  ----     |
| Case 1 | 替换结点是其父结点的左子结点，替换结点的兄弟结点是红结点。	| 1. 将S设为黑色 2. 将P设为红色 3. 对P进行左旋，4. 得到情景2.1.2.3 进行情景2.1.2.3的处理   |
| Case 2 | 替换结点的兄弟结点是黑结点，且替换结点的兄弟结点的右子结点是红结点，左子结点任意颜色    | - 将S颜色设为P的颜色 - 将P设为黑色 - 将SR设为黑色 - 对P进行左旋   | 
| Case 3 | 替换结点的兄弟结点是黑结点，且替换结点的兄弟结点的右子结点为黑结点，左子结点为红结点 | 将S设为红色 --> 将SL设为黑色 --> 对S进行右旋，得到case 2  --> 进行case 2的处理
| Case 4 | 替换结点的兄弟结点是黑结点， 且替换结点的兄弟结点的子结点都为黑结点 | 将S设为红色 -- 把P作为新的替换结点 -- 重新进行删除结点情景处理 |

在线生成红黑树： https://www.cs.usfca.edu/~galles/visualization/Algorithms.html