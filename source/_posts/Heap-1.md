---
title: heap
date: 2020-06-04 21:15:38
tags:
disqusId: aitudou-blog
---

## Heap -- 1

堆（heap）也被称为优先队列（priority queue）。队列中允许的操作是先进先出（FIFO），在队尾插入元素，在队头取出元素。而堆也是一样，在堆底插入元素，在堆顶取出元素，但是堆中元素的排列不是按照到来的先后顺序，而是按照一定的优先顺序排列的。这个优先顺序可以是元素的大小或者其他规则。
<!-- More -->
如图一所示就是一个堆，堆优先顺序就是大的元素排在前面，小的元素排在后面，这样得到的堆称为最大堆。最大堆中堆顶的元素是整个堆中最大的，并且每一个分支也可以看成一个最大堆。同样的，我们可以定义最小堆，如图二所示。 -->

![](https://img-my.csdn.net/uploads/201210/16/1350354702_4619.jpg)

### 堆的存储

堆可以看成一个二叉树，所以可以考虑使用二叉树的表示方法来表示堆。但是因为堆中元素按照一定的优先顺序排列，因此可以使用更简单的方法——数组——来表示，这样可以节省子节点指针空间，并且可以快速访问每个节点。堆得数组表示其实就是堆层级遍历的结果，如下图所示：

### 插入

堆还可以看成一个完全二叉树，每次总是先填满上一层，再在下一层从左往右依次插入。堆的插入步骤：

将新元素增加到堆的末尾
按照优先顺序，将新元素与其父节点比较，如果新元素小于父节点则将两者交换位置。
不断进行第2步操作，直到不需要交换新元素和父节点，或者达到堆顶
最后通过得到一个最小堆
通过将新元素与父节点调整交换的操作叫做上滤(percolate up)。

![](https://img-blog.csdn.net/20151219140916955)

### 删除

堆的删除操作与插入操作相反，插入操作从下往上调整堆，而删除操作则从上往下调整堆。

删除堆顶元素（通常是将堆顶元素放置在数组的末尾）
比较左右子节点，将小的元素上调。
不断进行步骤2，直到不需要调整或者调整到堆底。
上述调整的方法称为下滤（percolate down）。

![](https://img-blog.csdn.net/20151219141009142)

## 相关算法

### 最小的K个数

3个方法： 
1. Bubble 排序想法 每次找一个最小的 k次 O(kn)
2. Quick Sort: 每次找index 如果index左边 < k, 右边在找index --> 分类思路
- 前两种方法有一个问题是 数据量太大的时候 不行 而且改变了原来的数据
3. Heap: 把data 放到heap里面，在拿出来k个 就行了 

Golang 实现： https://www.cnblogs.com/huxianglin/p/6925119.html

